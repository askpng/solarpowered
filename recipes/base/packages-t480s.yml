# This file contains modules to install T480/s utilities:
# - throttled, for undervolting intel devices
# - tlp and tlp-rdw, for configuring power saving and radio devices
# - zcfan, for controlling thinkpad fan (adding kargs required) 

modules:
  - type: rpm-ostree
    repos:
      # abn/throttled 
      - https://copr.fedorainfracloud.org/coprs/abn/throttled/repo/fedora-%OS_VERSION%/abn-throttled-fedora-%OS_VERSION%.repo
      # sneexy/python-validity
      - https://copr.fedorainfracloud.org/coprs/sneexy/python-validity/repo/fedora-%OS_VERSION%/sneexy-python-validity-fedora-%OS_VERSION%.repo
    install:
      # python-validity
      - fprintd-clients
      - fprintd-clients-pam
      - open-fprintd
      - python3-validity
      # tlp
      - tlp
      - tlp-rdw
      # throttled
      - throttled
      # zcfan
      - zcfan
    remove:
      # python-validity conflicts
      - fprintd
      - fprintd-pam
      # tlp conflicts
      - power-profiles-daemon
      # throtled-conflicts
      - thermald
      
  - type: systemd
    system:
      enabled:
        # tlp
        - tlp.service
        # throttled
        # throttled.service
      masked: 
        # tlp
        - systemd-rfkill.service
        - systemd-rfkill.socket
