modules:
  - type: script
    snippets:
      # bitwarden RPM
      - wget -t 5 -O /tmp/bitwarden.rpm "https://bitwarden.com/download/?app=desktop&platform=linux&variant=rpm"
      - dnf install -y /tmp/bitwarden.rpm
      - rm /tmp/bitwarden.rpm
      # luminance
      - 'dnf install -y https://github.com/sidevesh/Luminance/releases/latest/download/luminance-$(curl https://api.github.com/repos/sidevesh/Luminance/releases/latest | grep tag_name | cut -d : -f2 | tr -d "v\", ").rpm'
      # windscribe
      - 'dnf install -y https://github.com/Windscribe/Desktop-App/releases/latest/download/windscribe_$(curl https://api.github.com/repos/Windscribe/Desktop-App/releases/latest | grep tag_name | cut -d : -f2 | tr -d "v\", ")_amd64_fedora.rpm'
      # atuin
      - 'VER=$(basename $(curl -Ls -o /dev/null -w %{url_effective} https://github.com/atuinsh/atuin/releases/latest)) && curl -fLs --create-dirs https://github.com/atuinsh/atuin/releases/download/${VER}/atuin-x86_64-unknown-linux-musl.tar.gz -o /tmp/atuin-x86_64-unknown-linux-musl.tar.gz'
      - tar -xzf /tmp/atuin-x86_64-unknown-linux-musl.tar.gz -C /tmp
      - cp /tmp/atuin-x86_64-unknown-linux-musl/atuin /usr/bin/atuin && chmod 0755 /usr/bin/atuin
      - rm /tmp/atuin-x86_64-unknown-linux-musl.tar.gz
      - rm -r /tmp/atuin-x86_64-unknown-linux-musl    
      # just
      - 'VER=$(basename $(curl -Ls -o /dev/null -w %{url_effective} https://github.com/casey/just/releases/latest)) && curl -fLs --create-dirs https://github.com/casey/just/releases/download/${VER}/just-${VER}-x86_64-unknown-linux-musl.tar.gz -o /tmp/just-x86_64-unknown-linux-musl.tar.gz'
      - 'mkdir -p /tmp/just && tar -xzf /tmp/just-x86_64-unknown-linux-musl.tar.gz -C /tmp/just/'
      - cp /tmp/just/just /usr/bin/just && chmod 0755 /usr/bin/just
      - cp /tmp/just/completions/just.bash /usr/share/bash-completion/completions/just
      - cp /tmp/just/completions/just.fish /usr/share/fish/completions/just.fish      
      - rm /tmp/just-x86_64-unknown-linux-musl.tar.gz
      - rm -r /tmp/just